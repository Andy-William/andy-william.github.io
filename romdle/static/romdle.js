const t=["red","yellow","green"];function e(){const e=document.getElementById("guesses").value.trim().toUpperCase(),o=e.replace(/[^a-zA-Z]+/g,"").match(/.{5}/g)?.filter((t=>5===t.length))||[],l=document.getElementById("grid"),r=[],i=[{},{},{},{},{}];l.querySelectorAll(".row").forEach((t=>{const e=Array.from(t.querySelectorAll(".tile"));r.push(e.map(((t,e)=>{if(i[e][t.textContent]=parseInt(t.dataset.colorIndex),0!=i[e][t.textContent])for(let e=0;e<5;e++)i[e][t.textContent]&&0!=i[e][t.textContent]||(i[e][t.textContent]=1);return{letter:t.textContent,colorIndex:parseInt(t.dataset.colorIndex)}})))})),l.innerHTML="",o.forEach(((e,o)=>{const c=document.createElement("div");c.classList.add("row");for(let l=0;l<5;l++){const s=document.createElement("div"),a=r?.[o]?.[l],d=a?.letter===e[l]?a.colorIndex:i[l][e[l]]||0;s.classList.add("tile",t[d]),s.textContent=e[l],s.dataset.colorIndex=d,s.addEventListener("click",(()=>{let r=(parseInt(s.dataset.colorIndex)+1)%t.length;n(l,e[l],r,o)})),c.appendChild(s)}l.appendChild(c)})),document.getElementById("colorHint").style.display="",document.getElementById("solveBtn").style.display="block"}function n(e,n,o,l){const r=document.getElementById("grid");Array.from(r.children).forEach(((r,i)=>{if(i<l)return;let c=r.children[e];c.textContent==n&&(c.dataset.colorIndex=o,t.forEach((t=>c.classList.remove(t))),c.classList.add(t[o]))}))}document.getElementById("loadBtn").addEventListener("click",e),document.getElementById("solveBtn").addEventListener("click",(function(){const t=document.getElementById("solveBtn");document.getElementById("answercontainer").style.display="flex";const e=document.getElementById("results"),n=document.getElementById("suggestions");t.disabled=!0,t.textContent="Solving...",e.innerHTML="<p>Loading...</p>",n.innerHTML="<p>Loading...</p>",setTimeout((()=>{(async function(){const t=Array.from(document.getElementById("grid").querySelectorAll(".row"));let e=[],n=[];t.forEach((t=>{let o="",l="";t.querySelectorAll(".tile").forEach(((t,e)=>{o+=t.textContent,l+=t.dataset.colorIndex})),e.push(o),n.push(l)}));let c=[];if(n.length>0){let t=n.length-1;for(let o=0;o<5;o++)"0"!=n[t][o]&&c.push(e[t][o])}function s(t){if(""==t)return!1;for(let e of c){let n=t.replace(RegExp(e,"i"),"");if(n==t)return!1;t=n}return!0}await Promise.all(r);let a=o.filter((t=>s(t.trim()))).map((t=>t.trim().toUpperCase())),d=l.filter((t=>s(t.trim()))).map((t=>t.trim().toUpperCase())),m={};function u(t,e){if(t=t.toUpperCase(),e=e.toUpperCase(),m[t]&&m[t][e])return m[t][e];m[t]=m[t]||{};let n=[0,0,0,0,0],o={};for(let l=0;l<5;l++)t[l]==e[l]?n[l]=2:o[e[l]]=(o[e[l]]||0)+1;for(let l=0;l<5;l++)t[l]!=e[l]&&o[t[l]]&&o[t[l]]>0&&(o[t[l]]--,n[l]=1);return m[t][e]=n.join("")}let g=[...a],p=[...d];for(let t=0;t<n.length;t++)g=g.filter((o=>u(e[t],o)==n[t])),p=p.filter((o=>u(e[t],o)==n[t]));function f(t,e){let n=new Array(e.length);for(let o=0;o<e.length;o++){n[o]=[e[o],0];let l={};for(let r=0;r<t.length;r++){let i=u(e[o],t[r]);l[i]=(l[i]||0)+1,"22222"==i&&l[i]--,l[i]>n[o][1]&&(n[o][1]=l[i])}n[o][2]=Object.keys(l).length}return n}class h{constructor(t,e,n){this.word=t,this.remaining=e,this.combination=n}static compare(t,e){return t.remaining-e.remaining||e.combination-t.combination}lte(t){return h.compare(this,t)<=0}lt(t){return h.compare(this,t)<=-1}toString(){return this.word+" - "+this.remaining+" - "+this.combination}}function y(t,e){if(0==e.length)return[];let n=f(t,e);return n=n.map((t=>new h(t[0],t[1],t[2]))),n=n.sort(((t,e)=>h.compare(t,e))),n}let E=new h("",99999,0),x=y(g,g);x.length>0&&(E=x[0]);x=x.filter((t=>t.lte(E))),console.log(x.map((t=>t.toString())));let I=y(g,a);I=I.filter((t=>t.lt(E))),I.length>0&&(E=I[0]);console.log(I.map((t=>t.toString())));let C=y(g,d);C=C.filter((t=>t.lt(E))),console.log(C.map((t=>t.toString())));let B=C.map((t=>t.word)).concat(I.map((t=>t.word))).concat(x.map((t=>t.word))),v=document.getElementById("results");i(v,g),i(document.getElementById("suggestions"),B);const w=document.createElement("div"),L=new Set(g);w.textContent="Other words that fit: "+p.filter((t=>!L.has(t))).join(", "),w.classList.add("hint"),v.appendChild(w)})().then((()=>{t.disabled=!1,t.textContent="Solve"}))}),50)}));let o=[],l=[],r=[fetch("romdle.txt").then((t=>t.text())).then((t=>o=t.split("\n"))),fetch("words5.txt").then((t=>t.text())).then((t=>l=t.split("\n")))];function i(t,n){t.innerHTML="",n.forEach((n=>{const o=document.createElement("div");o.textContent=n,o.classList.add("suggestion"),o.addEventListener("click",(()=>{!function(t){const n=document.getElementById("guesses");n.value=n.value+"\n"+t,e()}(n)})),t.appendChild(o)}))}