const t=["red","yellow","green"];function e(){const e=document.getElementById("guesses").value.trim().toUpperCase(),o=e.replace(/[^a-zA-Z]+/g,"").match(/.{5}/g)?.filter((t=>5===t.length))||[],l=[document.getElementById("grid1"),document.getElementById("grid2")];for(let e of l){const l=[],r=[{},{},{},{},{}];e.querySelectorAll(".row").forEach((t=>{const e=Array.from(t.querySelectorAll(".tile"));l.push(e.map(((t,e)=>{if(r[e][t.textContent]=parseInt(t.dataset.colorIndex),0!=r[e][t.textContent])for(let e=0;e<5;e++)r[e][t.textContent]&&0!=r[e][t.textContent]||(r[e][t.textContent]=1);return{letter:t.textContent,colorIndex:parseInt(t.dataset.colorIndex)}})))})),e.innerHTML="",o.forEach(((o,i)=>{const d=document.createElement("div");d.classList.add("row");for(let c=0;c<5;c++){const a=document.createElement("div"),s=l?.[i]?.[c],m=s?.letter===o[c]?s.colorIndex:r[c][o[c]]||0;a.classList.add("tile",t[m]),a.textContent=o[c],a.dataset.colorIndex=m,a.addEventListener("click",(()=>{let l=(parseInt(a.dataset.colorIndex)+1)%t.length;n(e.id,c,o[c],l,i)})),d.appendChild(a)}e.appendChild(d)}))}document.getElementById("colorHint").style.display="",document.getElementById("previewGrid").style.display="",document.getElementById("solveBtn").style.display="block"}function n(e,n,o,l,r){const i=document.getElementById(e);Array.from(i.children).forEach(((e,i)=>{if(i<r)return;let d=e.children[n];d.textContent==o&&(d.dataset.colorIndex=l,t.forEach((t=>d.classList.remove(t))),d.classList.add(t[l]))}))}document.getElementById("loadBtn").addEventListener("click",e),document.getElementById("solveBtn").addEventListener("click",(function(){const t=document.getElementById("solveBtn");document.getElementById("answercontainer").style.display="flex";const e=document.getElementById("results1"),n=document.getElementById("results2"),d=document.getElementById("suggestions");t.disabled=!0,t.textContent="Solving...",e.innerHTML="<p>Loading...</p>",n.innerHTML="<p>Loading...</p>",d.innerHTML="<p>Loading...</p>",setTimeout((()=>{(async function(){document.getElementById("grid1"),document.getElementById("grid2");const t=Array.from(document.getElementById("grid1").querySelectorAll(".row")),e=Array.from(document.getElementById("grid2").querySelectorAll(".row"));let n=[],d=[],c=[],a=[];t.forEach((t=>{let e="",o="";t.querySelectorAll(".tile").forEach(((t,n)=>{e+=t.textContent,o+=t.dataset.colorIndex})),n.push(e),c.push(o)})),e.forEach((t=>{let e="",n="";t.querySelectorAll(".tile").forEach(((t,o)=>{e+=t.textContent,n+=t.dataset.colorIndex})),d.push(e),a.push(n)})),await Promise.all(r);let s=o.filter((t=>t.trim())).map((t=>t.trim().toUpperCase())),m=l.filter((t=>t.trim())).map((t=>t.trim().toUpperCase())),u={};function g(t,e){if(t=t.toUpperCase(),e=e.toUpperCase(),u[t]&&u[t][e])return u[t][e];u[t]=u[t]||{};let n=[0,0,0,0,0],o={};for(let l=0;l<5;l++)t[l]==e[l]?n[l]=2:o[e[l]]=(o[e[l]]||0)+1;for(let l=0;l<5;l++)t[l]!=e[l]&&o[t[l]]&&o[t[l]]>0&&(o[t[l]]--,n[l]=1);return u[t][e]=n.join("")}var h=[...s],p=[...m];for(let t=0;t<c.length;t++)h=h.filter((e=>g(n[t],e)==c[t])),p=p.filter((e=>g(n[t],e)==c[t]));var f=[...s],y=[...m];for(let t=0;t<a.length;t++)f=f.filter((e=>g(d[t],e)==a[t])),y=y.filter((e=>g(d[t],e)==a[t]));function E(t,e){let n=new Array(e.length);for(let o=0;o<e.length;o++){n[o]=[e[o],0];let l={};for(let r=0;r<t.length;r++){let i=g(e[o],t[r]);l[i]=(l[i]||0)+1,"22222"==i&&l[i]--,l[i]>n[o][1]&&(n[o][1]=l[i])}n[o][2]=Object.keys(l).length}return n}class I{constructor(t,e,n,o,l){this.word=t,this.remaining1=Math.max(e,n),this.remaining2=Math.min(e,n),this.combination1=Math.max(o,l),this.combination2=Math.min(o,l)}static compare(t,e){return t.remaining1-e.remaining1||t.remaining2-e.remaining2||e.combination1*e.combination2-t.combination1*t.combination2}lte(t){return I.compare(this,t)<=0}lt(t){return I.compare(this,t)<=-1}toString(){return this.word+" - "+this.remaining1+"-"+this.remaining2+" - "+this.combination1+"-"+this.combination2}}function x(t,e,n){if(0==n.length)return[];let o=E(t,n),l=E(e,n),r=new Array(n.length);for(let t=0;t<n.length;t++)r[t]=new I(n[t],o[t][1],l[t][1],o[t][2],l[t][2]);return r=r.sort(((t,e)=>I.compare(t,e))),r}let w=[];1!=h.length||n.includes(h[0])||w.push(new I(h[0],0,0,0,0));1!=f.length||d.includes(f[0])||w.push(new I(f[0],0,0,0,0));console.log(w.map((t=>t.toString())));let B=new I("",99999,99999,0,0),C=x(h,f,[...new Set(h.concat(f))]);C.length>0&&(B=C[0]);C=C.filter((t=>t.lte(B))).filter((t=>!n.includes(t.word.substring(0,5)))),console.log(C);let v=x(h,f,s);v=v.filter((t=>t.lt(B))),v.length>0&&(B=v[0]);console.log(v.map((t=>t.toString())));let L=x(h,f,m);L=L.filter((t=>t.lt(B))),console.log(L.map((t=>t.toString())));let S=w.map((t=>t.word)).concat(L.map((t=>t.word))).concat(v.map((t=>t.word))).concat(C.map((t=>t.word)));S=[...new Set(S)];let b=document.getElementById("results1"),A=document.getElementById("results2");i(b,h),i(A,f),i(document.getElementById("suggestions"),S);const M=document.createElement("div"),k=new Set(h);M.textContent="Other words that fit: "+p.filter((t=>!k.has(t))).join(", "),M.classList.add("hint"),b.appendChild(M);const q=document.createElement("div"),H=new Set(f);q.textContent="Other words that fit: "+y.filter((t=>!H.has(t))).join(", "),q.classList.add("hint"),A.appendChild(q)})().then((()=>{t.disabled=!1,t.textContent="Solve"}))}),50)}));let o=[],l=[],r=[fetch("romdle.txt").then((t=>t.text())).then((t=>o=t.split("\n"))),fetch("words5.txt").then((t=>t.text())).then((t=>l=t.split("\n")))];function i(t,n){t.innerHTML="",n.forEach((n=>{const o=document.createElement("div");o.textContent=n,o.classList.add("suggestion"),o.addEventListener("click",(()=>{!function(t){const n=document.getElementById("guesses");n.value=n.value+"\n"+t,e()}(n)})),t.appendChild(o)}))}